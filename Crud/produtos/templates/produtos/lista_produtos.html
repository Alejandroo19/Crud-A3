{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <title>Meu Estoque</title>
    <link rel="stylesheet" href="{% static 'css/bootstrap.css' %}" />
  </head>

  <body>
    <div class="container">
      <!-- Cabeçalho da Página -->
      <div class="row align-items-center mb-4">
        <div class="col-md-6">
          <h2>Meu Estoque</h2>
          <p>
            Você tem produtos com estoque baixo.
            <a href="{% url 'ver_estoque_baixo' %}">Ver</a>
          </p>
        </div>
        <div class="col-md-6 text-end">
          <!-- Campo de Busca -->
          <form method="GET" action="{% url 'procurar_produto' %}" class="d-inline-block">
            <input
              type="text"
              name="query"
              class="form-control d-inline-block me-2"
              placeholder="Procurar"
              id="procurar"
            />
            <button type="submit" class="btn btn-outline-secondary">Buscar</button>
          </form>

          <!-- Botões Cadastrar Produto e Mais -->
          <button
            type="button"
            class="btn btn-outline-secondary ms-2"
            data-bs-toggle="modal"
            data-bs-target="#cadastrarProdutoModal"
          >
            Cadastrar Produto
          </button>
          <button
            type="button"
            class="btn btn-outline-secondary ms-2"
            data-bs-toggle="modal"
            data-bs-target="#maisModal"
          >
            Mais
          </button>
        </div>
      </div>

      <div class="modal fade" tabindex="-1" id="cadastrarProdutoModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Cadastrar Produto</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form method="post" action="{% url 'cadastrar_produto' %}">
                        {% csrf_token %}
                        <div class="mb-3 col-sm-6">
                            <label for="id_nome" class="form-label">Nome</label>
                            {{ form.nome }}
                        </div>
                        <div class="mb-3 col-sm-6">
                            <label for="id_categoria" class="form-label">Categoria</label>
                            {{ form.categoria }}
                        </div>
                        <div class="mb-3 col-sm-6">
                            <label for="id_quantidade_minima" class="form-label">Quantidade Mínima</label>
                            {{ form.quantidade_minima }}
                        </div>
                        <div class="mb-3 col-sm-6">
                            <label for="id_preco" class="form-label">Preço</label>
                            {{ form.preco }}
                        </div>
                        <div class="modal-footer">
                            <button type="submit" class="btn btn-primary">Cadastrar</button>
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
      <!-- Modal Mais Opções -->
      <div class="modal fade" tabindex="-1" id="maisModal">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Mais Opções</h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body text-center">
              <!-- Botão Gerenciar Categorias -->
              <a href="{% url 'gerenciar_categorias' %}" class="btn btn-outline-secondary w-100 my-2">
                Gerenciar Categorias
              </a>
              <!-- Botão Histórico de Movimentações -->
              <a href="{% url 'historico_movimentacoes' %}" class="btn btn-outline-secondary w-100 my-2">
                Histórico de Movimentações
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- Lista de Produtos -->
      <div class="produtos-lista">
        {% for produto in produtos %}
        <div class="produto-item mb-3 p-3 border rounded">
          <p><strong>Nome:</strong> {{ produto.nome }}</p>
          <p><strong>Quantidade:</strong> {{ produto.quantidade }}</p>
          <p><strong>Categoria:</strong> {{ produto.categoria.nome }}</p>
          <p><strong>Preço:</strong> R$ {{ produto.preco }}</p>
        </div>
        {% endfor %}
      </div>
    </div>
    <script src="{% static 'js/bootstrap.js' %}"></script>
  </body>
</html>
